file = parse("duplex.ifc")
slabs = create_geometry(file, include={"IfcSlab"})
doors = create_geometry(file, include={"IfcDoor"})
surfaces = create_geometry(file, exclude={"IfcOpeningElement", "IfcDoor"})
slab_voxel_surface = voxelize(slabs)
slab_voxels = fill_volume(slab_voxel_surface)
door_voxels = voxelize(doors)
surface_voxels = voxelize(surfaces)
walkable = shift(slab_voxels, dx=0, dy=0, dz=1)
walkable_minus = subtract(walkable, slab_voxels)
walkable_seed = intersect(door_voxels, walkable_minus)
reachable = traverse_over(surface_voxels, walkable_seed, step=0.3, max_rise=0.5, xneg=0.1, xpos=0.1, yneg=0.1, ypos=0.1, zneg=0.0, zpos=1.0)
full = constant_like(surfaces, 1)
surfaces_sweep = sweep(surfaces, dx=0, dy=0, dz=0.5)
deadly = subtract(full, surfaces_sweep)
result = intersect(reachable, deadly)
